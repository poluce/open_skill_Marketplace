<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æŠ€èƒ½å¸‚åœº</title>
  <link rel="stylesheet" href="{{cssUri}}">
  <style>
    :root {
      --accent-color: #8A2BE2;
      --accent-glow: rgba(138, 43, 226, 0.3);
      --card-bg: var(--vscode-welcomePage-tileBackground, rgba(255, 255, 255, 0.05));
      --text-main: var(--vscode-foreground);
      --text-dim: var(--vscode-descriptionForeground);
    }
  </style>
</head>

<body>
  <div class="container">
    <div id="warningBanner" class="warning-banner">
      <i>âš ï¸</i>
      <div>
        <div>
          ç”±äºè®¿é—® GitHub API è¿‡äºé¢‘ç¹ (60æ¬¡/h)ï¼Œå½“å‰åŠ è½½çš„æ˜¯æœ¬åœ°ç¼“å­˜ã€‚é…ç½®
          Token å¯è§£å°ã€‚
        </div>
        <button class="warning-btn" onclick="configureToken()">
          ç«‹å³è®¾ç½® Token
        </button>
      </div>
    </div>
    <div class="search-container" style="flex-direction: column; align-items: stretch; gap: 8px;">
      <!-- ç¬¬ä¸€è¡Œï¼šæœç´¢æ¡† + è¯­è¨€é€‰æ‹© + åˆ†ç±»å¼€å…³ -->
      <div style="display: flex; gap: 8px; align-items: center; width: 100%;">
        <div class="search-box">
          <span style="opacity: 0.5">ğŸ”</span>
          <input type="text" id="searchInput" class="search-input" placeholder="æœç´¢æŠ€èƒ½..." oninput="updateUI()" />
        </div>
        <select id="langSelect" class="lang-select" onchange="onLangChange()">
          <option value="">åŸæ–‡</option>
          <option value="zh-CN">ä¸­æ–‡</option>
        </select>
        <div style="display: flex; align-items: center; gap: 4px; font-size: 11px; opacity: 0.8; margin-left: 2px;">
          <input type="checkbox" id="aiCategoriesToggle" onchange="onToggleAiCategories()" style="cursor: pointer" />
          <label for="aiCategoriesToggle" style="cursor: pointer; white-space: nowrap">åˆ†ç±»</label>
        </div>
      </div>

      <!-- ç¬¬äºŒè¡Œï¼šæ ‡ç­¾ + Agent é€‰æ‹© + èŒƒå›´é€‰æ‹© -->
      <div style="display: flex; align-items: center; gap: 8px;">
        <select id="agentTypeSelect" class="lang-select" style="flex: 1;" onchange="onAgentTypeChange()">
          <option value="antigravity">Antigravity (Gemini)</option>
          <option value="gemini">Gemini CLI</option>
          <option value="claude">Claude</option>
          <option value="codex">Codex</option>
          <option value="opencode">Open Code</option>
        </select>
        <select id="scopeSelect" class="lang-select" style="flex: 1;" onchange="onScopeChange()">
          <option value="global">å…¨å±€å®‰è£… (Home)</option>
          <option value="project">é¡¹ç›®å®‰è£… (Workspace)</option>
        </select>
      </div>
    </div>

    <!-- ç¿»è¯‘è¿›åº¦æ¡ -->
    <div id="translationProgress" class="translation-progress" style="display: none;">
      <div class="progress-info">
        <span>æ­£åœ¨æ™ºèƒ½åˆ†ç±»åŠç¿»è¯‘æŠ€èƒ½åˆ—è¡¨...</span>
        <span id="progressPercent">0%</span>
      </div>
      <div class="progress-track">
        <div id="progressFill" class="progress-fill"></div>
      </div>
    </div>

    <div class="tabs">
      <div class="tab active" id="tabAvailable" onclick="setTab('available')">
        å‘ç°æŠ€èƒ½ <span class="tab-count" id="countAvailable">0</span>
      </div>
      <div class="tab" id="tabInstalled" onclick="setTab('installed')">
        å·²å®‰è£… <span class="tab-count" id="countInstalled">0</span>
      </div>
    </div>

    <div class="categories" id="categories">
      <div class="category-chip active" onclick="setCategory('å…¨éƒ¨')">å…¨éƒ¨</div>
      <div class="category-chip" onclick="setCategory('é«˜èµ')">âœ“ é«˜èµæ¦œ</div>
      <div class="category-chip ai-category" onclick="setCategory('ç¼–ç¨‹')">ç¼–ç¨‹</div>
      <div class="category-chip ai-category" onclick="setCategory('åŠå…¬')">åŠå…¬</div>
      <div class="category-chip ai-category" onclick="setCategory('åˆ›æ„')">åˆ›æ„</div>
      <div class="category-chip ai-category" onclick="setCategory('åˆ†æ')">åˆ†æ</div>
      <div class="category-chip ai-category" onclick="setCategory('ç”Ÿæ´»')">ç”Ÿæ´»</div>
    </div>

    <!-- é«˜èµæ¦œçš„äºŒçº§æ¥æºç­›é€‰å™¨ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰ -->
    <div class="sub-filter-container" id="sourceFilterContainer">
      <div class="sub-filter-chip active" data-source="å…¨éƒ¨" onclick="setSourceFilter('å…¨éƒ¨')">å…¨éƒ¨</div>
      <!-- å…¶ä½™ç­›é€‰èŠ¯ç‰‡ç”± JS åŠ¨æ€ç”Ÿæˆ -->
    </div>

    <div class="skill-list" id="skillList">
      <div class="loader-container" id="loader">
        <div class="loader"></div>
        <div style="font-size: 11px; opacity: 0.6">æ­£åœ¨æŠ“å–å®˜æ–¹æŠ€èƒ½åº“...</div>
      </div>
    </div>
  </div>

  <!-- åŠ¨æ€å˜é‡æ³¨å…¥ -->
  <script>
    const vscode = acquireVsCodeApi();
    const oldState = vscode.getState() || {};
    let currentCategory = oldState.category || "å…¨éƒ¨";
    let currentSourceFilter = oldState.source || "å…¨éƒ¨";
    let currentTab = oldState.tab || "available";
    let currentLanguage = "/*{{currentLang}}*/";
    let showAiCategories = "/*{{showAiCategories}}*/" === "true";
    let currentAgentType = "/*{{currentAgentType}}*/";
    let currentScope = "/*{{currentScope}}*/";

    let skills = [/*{{skillsData}}*/];

    let sourceConfigs = [/*{{sourceConfigs}}*/];
  </script>
  <!-- ä¸šåŠ¡é€»è¾‘è„šæœ¬ -->
  <script src="{{jsUri}}"></script>
</body>

</html>